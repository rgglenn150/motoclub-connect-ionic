<ion-header class="ion-no-border club-header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>

  <div class="club-header-content">
    <div class="cover-photo-container">
      <img [src]="club.coverPhotoUrl" class="cover-photo" alt="Club Cover Photo"/>
      <div class="gradient-overlay"></div>
    </div>
    <ion-avatar class="club-avatar">
      <img [src]="club.logoUrl" alt="Club Logo"/>
    </ion-avatar>
    <div class="header-actions">
      <ion-button *ngIf="isUserAdmin" fill="clear">
        <ion-icon slot="icon-only" name="settings-outline" color="light"></ion-icon>
      </ion-button>
      <ion-button *ngIf="!isUserMember" color="brand-amber" shape="round" (click)="joinClub()">
        <ion-icon slot="start" name="person-add-outline"></ion-icon>
        Join
      </ion-button>
    </div>
    <div class="club-info">
      <h1 class="club-name">{{ club.name }}</h1>
      <div class="club-meta">
        <ion-icon name="location-sharp"></ion-icon> {{ club.location }} &middot; {{ club.memberCount }} Members
      </div>
    </div>
  </div>
</ion-header>

<ion-content [fullscreen]="true">
  <ng-container *ngIf="canViewContent; else privateView">
    <ion-segment [value]="selectedTab" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="feed">
        <ion-label>Feed</ion-label>
      </ion-segment-button>
      <ion-segment-button value="members">
        <ion-label>Members</ion-label>
      </ion-segment-button>
      <ion-segment-button value="events">
        <ion-label>Events</ion-label>
      </ion-segment-button>
    </ion-segment>

    <div [ngSwitch]="selectedTab">
      <div *ngSwitchCase="'feed'">
        <ion-card class="asphalt-card pinned-announcement" *ngIf="pinnedPost">
          <ion-card-header>
            <ion-card-subtitle class="pinned-subtitle">
              <ion-icon name="pin"></ion-icon> PINNED ANNOUNCEMENT
            </ion-card-subtitle>
            <ion-card-title>{{ pinnedPost.title }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>{{ pinnedPost.content }}</ion-card-content>
        </ion-card>
        <ion-card class="asphalt-card" *ngIf="upcomingRide">
          <div class="card-header-row">
            <div class="card-text">
              <ion-card-subtitle>UPCOMING RIDE &middot; {{ upcomingRide.date | date: 'MMM d, y' }}</ion-card-subtitle>
              <ion-card-title>{{ upcomingRide.title }}</ion-card-title>
            </div>
            <img [src]="upcomingRide.imageUrl" class="club-thumbnail" [alt]="upcomingRide.title"/>
          </div>
          <div class="card-footer">
            <div class="footer-item">
              <ion-icon name="location-sharp"></ion-icon>
              <span>{{ upcomingRide.location }}</span>
            </div>
            <div class="footer-item">
              <ion-icon name="people"></ion-icon>
              <span>{{ upcomingRide.attendeeCount }} Going</span>
            </div>
          </div>
        </ion-card>
      </div>

      <div *ngSwitchCase="'members'">
        </div>

      <div *ngSwitchCase="'events'">
        </div>
    </div>
  </ng-container>

  <ng-template #privateView>
    </ng-template>
</ion-content>

<ion-fab *ngIf="isUserAdmin" vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button color="brand-amber">
    <ion-icon name="add-outline"></ion-icon>
  </ion-fab-button>
</ion-fab>