/**
 * Animated CSS Weather Icons
 */

.weather-icon {
  display: inline-block;
  will-change: transform, opacity;
  transform: translateZ(0);

  &.weather-icon-small { width: 36px; height: 36px; }
  &.weather-icon-medium { width: 48px; height: 48px; }
  &.weather-icon-large { width: 72px; height: 72px; }

  svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
  }
}

.weather-icon-animated {
  // Entrance Animation
  animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;

  // Sunny
  &.weather-icon-sunny .sun-rays {
    animation: rotate 12s linear infinite;
    transform-origin: center;
  }
  &.weather-icon-sunny .sun-core {
    animation: pulse 4s ease-in-out infinite;
  }

  // Partly Cloudy
  &.weather-icon-partly-cloudy .cloud, &.weather-icon-cloudy .cloud-1 {
    animation: float 8s ease-in-out infinite;
  }
  &.weather-icon-cloudy .cloud-2 {
    animation: float 8s ease-in-out -2s infinite;
  }
  &.weather-icon-cloudy .cloud-3 {
    animation: float 6s ease-in-out -4s infinite;
  }

  // Fog
  &.weather-icon-fog .fog-line {
    animation: float 4s ease-in-out infinite;
    &:nth-child(2) { animation-delay: -1s; }
    &:nth-child(3) { animation-delay: -2s; }
    &:nth-child(4) { animation-delay: -3s; }
  }
  
  // Rain & Snow
  &.weather-icon-rain .rain-drop, &.weather-icon-showers .rain-drop, &.weather-icon-snow .snowflake {
    animation: bounce 1.5s ease-in-out infinite;
  }
  &.weather-icon-snow .snowflake {
    animation-name: float, rotate;
    animation-duration: 3s, 10s;
  }

  // Thunderstorm
  &.weather-icon-thunderstorm .cloud {
    animation: shake 2.5s ease-in-out infinite;
  }
  &.weather-icon-thunderstorm .lightning {
    animation: pulse 2s ease-in-out infinite;
  }

  // Loading & Error
  &.weather-icon-loading .loading-circle {
    animation: rotate 2s linear infinite;
  }
  &.weather-icon-error .error-symbol {
    animation: shake 3s ease-in-out infinite;
  }
}


// Keyframes for Icons
@keyframes float {
  50% { transform: translateY(-8px); }
}
@keyframes rotate {
  to { transform: rotate(360deg); }
}
@keyframes pulse {
  50% { transform: scale(1.1); opacity: 0.8; }
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-15px); }
  60% { transform: translateY(-7px); }
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
  20%, 40%, 60%, 80% { transform: translateX(3px); }
}
@keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { opacity: 1; transform: scale(1.1); }
  70% { transform: scale(0.9); }
  100% { opacity: 1; transform: scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  .weather-icon-animated * {
    animation: none !important;
  }
}